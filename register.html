<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Register</title>
<link rel="stylesheet" href="/styles.css">
</head>
<body>
<header>
  <h1>Register</h1>
  <div class="nav-links">
    <a href="/login.html">Login</a>
    <a href="/items.html">Items</a>
  </div>
</header>
<main>
  <form id="registerForm">
    <input type="text" name="username" placeholder="Username" required>
    <input type="email" name="email" placeholder="Email" required>
    <input type="password" name="password" placeholder="Password" required>
    <button type="submit">Register</button>
  </form>
</main>

<script>
const form = document.getElementById('registerForm');
form.addEventListener('submit', async e => {
  e.preventDefault();
  const data = Object.fromEntries(new FormData(form));
  const res = await fetch('/auth/register', {
    method: 'POST',
    headers: {'Content-Type':'application/json'},
    body: JSON.stringify(data)
  });
  const result = await res.json();
  if(res.ok){
    localStorage.setItem('token', result.token);
    alert('Registered!');
    window.location.href = '/items.html';
  } else {
    alert(result.message || 'Error');
  }
});
</script>
</body>
</html>
